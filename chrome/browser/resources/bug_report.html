<!DOCTYPE HTML>
<html i18n-values="dir:textdirection;">
<head>
<meta charset="utf-8"/>
<title i18n-content="title"></title>
<link rel="stylesheet" href="bug_report.css"/>

<script src="shared/js/local_strings.js"></script>
<script src="shared/js/util.js"></script>
<script src="bug_report.js"></script>
<script>

///////////////////////////////////////////////////////////////////////////////
// Document Functions:
/**
 * Window onload handler, sets up the page.
 */
function load() {
  // textContent on description-text textarea seems to default
  // to several spaces, this resets it to empty.
  $('description-text').textContent = '';

  $('current-screenshot').nextSibling.textContent =
      localStrings.getString('currentscreenshots');
  $('no-screenshot').nextSibling.textContent =
      localStrings.getString('noscreenshot');

  // Get a list of issues that we allow the user to select from.
  // Note, the order and the issues types themselves are different
  // between Chromium and Chromium OS, so this code needs to be
  // maintained individually between the bug_report.html and
  // bug_report_cros.html files.
  var issueTypeText = [];
  issueTypeText[0] = localStrings.getString('issue-choose');
  issueTypeText[1] = localStrings.getString('issue-page-formatting');
  issueTypeText[2] = localStrings.getString('issue-page-load');
  issueTypeText[3] = localStrings.getString('issue-plugins');
  issueTypeText[4] = localStrings.getString('issue-tabs');
  issueTypeText[5] = localStrings.getString('issue-sync');
  issueTypeText[6] = localStrings.getString('issue-crashes');
  issueTypeText[7] = localStrings.getString('issue-extensions');
  issueTypeText[8] = localStrings.getString('issue-phishing');
  issueTypeText[9] = localStrings.getString('issue-other');

  // Add all the issues to the selection box.
  for (var i = 0; i < issueTypeText.length; i++) {
    var option = document.createElement('option');
    option.className = 'bug-report-text';
    option.textContent = issueTypeText[i];
    $('issue-with-combo').add(option);
  }

  chrome.send('getDialogDefaults', []);
  chrome.send('refreshScreenshots', []);
};

function setupScreenshots(screenshots) {
  if (screenshots.length > 0)
    addScreenshot('current-screenshots', screenshots[0]);
}

function setupDialogDefaults(defaults) {
  if (defaults.length > 0)
    $('page-url-text').value = defaults[0];
}

window.addEventListener('DOMContentLoaded', load);
</script>
</head>
<body>
<table>
  <!--  Issue type dropdown -->
  <tr>
    <th id="issue-with" class="bug-report-label" i18n-content="issue-with">
    </th>
  </tr>
  <tr>
    <td>
      <select id="issue-with-combo" class="bug-report-text">
      </select>
    </td>
  </tr>
  <!--  Page URL text box -->
  <tr>
    <th colspan="2" id="page-url" class="bug-report-label"
        i18n-content="page-url">
    </th>
  </tr>
  <tr>
    <td colspan="2">
      <input id='page-url-text' maxlength=200 class="bug-report-text">
    </td>
  </tr>
  <!--  Description -->
  <tr>
    <th id="description" colspan="2" class="bug-report-label"
        i18n-content="description">
    </th>
  </tr>
  <tr>
    <td colspan="2">
      <textarea id='description-text' rows="10" class="bug-report-text">
      </textarea>
    </td>
  </tr>
  <!--  Screenshot radio buttons -->
  <tr>
    <th id="screenshot" class="bug-report-label" i18n-content="screenshot">
    </th>
  </tr>
  <tr>
    <td>
      <input id="no-screenshot" type="radio" name="screenshot-group"
             value="none" onclick="noneSelected()">
      <br>
      <input id="current-screenshot" type="radio" name="screenshot-group"
             value="current" checked onclick="currentSelected()">
      <br>
      <div id="current-screenshots" class="thumbnail-list">
      </div>
    </td>
  </tr>
  <!--  Buttons -->
  <tr>
    <td>
      <hr>
      <input id='send-report-button' type="submit" class="bug-report-button"
             i18n-values="value:send-report" onclick="sendReport()">
      <input id='cancel-button' type="submit" class="bug-report-button"
             i18n-values="value:cancel" onclick="cancel()">
    </td>
  </tr>
</table>
</body>
</html>
