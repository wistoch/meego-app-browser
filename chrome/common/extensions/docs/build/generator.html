<html>
  <head>
    <script>
var childFrame;

function generate() {
  if (!window.layoutTestController) {
    alert("window.layoutTestController not defined.");
    return;
  }
  
  layoutTestController.dumpAsText();
  layoutTestController.waitUntilDone();

  var page = window.location.search.substring(1);
  if (!page) {
    alert("please specify which page to generate via " +
          "?<page> ... ie. generator.html?tabs");
  }

  childFrame = document.createElement('iframe');
  childFrame.src = "../" + page + ".html?regenerate";
  childFrame.style.display = "none";
  document.body.appendChild(childFrame);
}

function done() {
  var preNode = document.createElement('pre');
  var textNode = document.createTextNode(
      childFrame.contentWindow.serializePage());
  preNode.appendChild(textNode);
  document.getElementsByTagName("body")[0].appendChild(preNode);
  layoutTestController.notifyDone();
}
    </script>
  </head>
  <body onload="generate();">
  </body>
</html>