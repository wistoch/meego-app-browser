<script>
var last_file_entries = null;

function getLastFileEntries() {
  return last_file_entries;
}

chrome.fileBrowserHandler.onExecute.addListener(
  function(id, file_entries) {
    if (id != "TestAction") {
      chrome.test.fail("Unexpected action id: " + id);
      return;
    }
    if (!file_entries || file_entries.length != 1) {
      chrome.test.fail("Unexpected file url list");
      return;
    }
    last_file_entries = file_entries;
    // Create a new tab
    chrome.tabs.create({
      url: "tab.html"
    });
  });

chrome.test.succeed();

</script>
