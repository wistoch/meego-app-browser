<html>
<head>
<script>

function getFromParent() {
  var target = document.getElementById('target');
  if (!target) {
    chrome.test.fail('no target');
  }
  target.innerText = chrome.experimental.popup.getParentWindow().magic;
}

function init() {
  chrome.extension.getBackgroundPage().popupCallback(window, getFromParent);
}

</script>
</head>
<body onload="init()">
<span id='target'></span>
</body>
</html>
