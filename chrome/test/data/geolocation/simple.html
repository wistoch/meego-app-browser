<html>
 <head>
  <script>
    var last_position = 0;
    var last_error = 0;
    var watch_id = 0;
    var display_alert = true;
    function geoSuccessCallback(position) {
      last_position = position;
      if (display_alert)
        alert('geoSuccessCallback');
    }
    function geoErrorCallback(error) {
      last_error = error;
      if (display_alert)
        alert('geoErrorCallback');
    }
    function geoStart() {
      watch_id = navigator.geolocation.watchPosition(
          geoSuccessCallback, geoErrorCallback,
          {maximumAge:600000, timeout:100000, enableHighAccuracy:true});
      return watch_id;
    }
    function geoGetLastPositionLatitude() {
      return "" + last_position.coords.latitude;
    }
    function geoGetLastPositionLongitude() {
      return "" + last_position.coords.longitude;
    }
    function geoGetLastError() {
      return "" + (last_error ? last_error.code : 0);
    }
    function geoEnableAlerts(enabled) {
      display_alert = enabled;
      return "" + display_alert;
    }
  </script>
 </head>
 <body>
 <input type="button" value="manual" onclick="geoStart()"/>
 </body>
</html>

