<html>
  <head>
    <title>Speech input test</title>
    <script type="text/javascript">
      function onspeechresult(value) {
        if (value == "Pictures of the moon") {
          document.getElementById('status').innerHTML = 'PASS';
          document.location = '#pass';
        } else {
          document.location = '#fail';
        }
      }
      function run() {
        // Calculate a point inside the speech button and pass that to the
        // c++ test code through the URL fragment. This calculation must
        // get updated if the speech button rendering changes.
        var inputField = document.getElementById('inputField');
        var x = inputField.offsetLeft + inputField.offsetWidth - 10;
        var y = inputField.offsetTop + Math.floor(inputField.offsetHeight / 2);
        document.location = document.location + '#' + x + ',' + y;
      }
    </script>
  </head>
  <body onLoad="run()">
    <input id='inputField' speech onchange="onspeechresult(this.value);"><br>
    <div id="status">FAIL</div>
  </body>
</html>
