#!/bin/sh

# Copyright (c) 2009 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# Frameworks included in an application for distribution aren't used for
# development, and don't need to bundle any headers.

set -e

if [ $# -ne 1 ] ; then
  echo "usage: ${0} FRAMEWORK" >& 2
  exit 1
fi

FRAMEWORK="${1}"

rm -rf -- "${FRAMEWORK}/Versions/Current/Headers" \
          "${FRAMEWORK}/Versions/Current/PrivateHeaders" \
          "${FRAMEWORK}/Headers" \
          "${FRAMEWORK}/PrivateHeaders"

# Remove other-versioned headers after current-version headers, in case Current
# is a symbolic link to another version, as is the usual case.  If everything
# was done in a single invocation, the shell would do the wildcard expansion
# first, and rm would try (and fail) to remove the same directory twice, such
# as Versions/Current/Headers and Versions/A/Headers when Versions/Current is
# a symbolic link for A.
rm -rf -- "${FRAMEWORK}"/Versions/*/Headers \
          "${FRAMEWORK}"/Versions/*/PrivateHeaders
