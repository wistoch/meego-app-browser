# Copyright (c) 2006-2008 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

__doc__ = """
Configuration for building modp_b64.lib / libmodp_b64.a.
"""

Import('env')

env = env.Clone(
    PDB = 'vc80.pdb',
)

env.Prepend(
    CPPPATH = [
        '$CHROME_SRC_DIR',
    ],
)

input_files = ChromeFileList([
    'modp_b64.cc',
    'modp_b64.h',
    'modp_b64_data.h',
])

env.ChromeLibrary('modp_b64', input_files)

p = env.ChromeMSVSProject('modp_b64.vcproj',
                          dest=('$CHROME_SRC_DIR/third_party/' +
                                    'modp_b64/modp_b64.vcproj'),
                          guid='{7100F41F-868D-4E99-80A2-AF8E6574749D}',
                          keyword='Win32Proj',
                          # TODO(sgk):  when we can intuit the hierarchy
                          # from the built targets.
                          #buildtargets=TODO,
                          files=input_files,
                          relative_path_prefix='./',
                          tools=[
                              'VCCLCompilerTool',
                              'VCLibrarianTool',
                          ],
                          ConfigurationType='4')

p.AddConfig('Debug|Win32',
            InheritedPropertySheets=[
                '$(SolutionDir)../build/common.vsprops',
                '$(SolutionDir)../build/debug.vsprops',
                '$(SolutionDir)../build/external_code.vsprops',
            ])

p.AddConfig('Release|Win32',
            InheritedPropertySheets=[
                '$(SolutionDir)../build/common.vsprops',
                '$(SolutionDir)../build/release.vsprops',
                '$(SolutionDir)../build/external_code.vsprops',
            ])
