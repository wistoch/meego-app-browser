# There are three kinds of suppressions in this file:
# 1. Third party stuff we have no control over.
#
# 2. Intentional unit test errors, stuff that is somehow a false positive
# in our own code, or stuff that is so trivial it's not worth fixing.
#
# 3. Suppressions for real chromium bugs that are not yet fixed.
# These should all be in chromium's bug tracking system.
# Periodically we should sweep this file and the bug tracker clean by
# running overnight and removing outdated bugs/suppressions.
#-----------------------------------------------------------------------

# 1. Third party stuff we have no control over.
{
   FIXME mac kevent libevent probably needs valgrind hooks
   Memcheck:Param
   kevent(changelist)
   fun:kevent
   fun:event_base_new
}
{
   # Mac system library bug?  See http://crbug.com/11327
   bug_11327
   Memcheck:Cond
   fun:_ZN19AudioConverterChain5ResetEv
   fun:AudioConverterReset
   obj:/System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio
}
{
   # Mac system library bug?  See http://crbug.com/11327
   bug_11327b
   Memcheck:Cond
   fun:AUNetSendEntry
   fun:AUNetSendEntry
   obj:/System/Library/Components/CoreAudio.component/Contents/MacOS/CoreAudio
}
{
   # CoreAudio leak.  See http://crbug.com/9351
   bug_9351
   Memcheck:Leak
   fun:_Znw*
   fun:_ZN12HALCADClient19AddPropertyListenerEmPK26AudioObjectPropertyAddressPFlmmS2_PvES3_
   fun:_ZN16HALDefaultDevice22InstallServerListenersEv
   fun:_ZN16HALDefaultDevice10InitializeEv
   fun:_ZN9HALSystem16CheckOutInstanceEv
   fun:AudioObjectGetPropertyData
   fun:_ZN15AudioManagerMac15HasAudioDevicesEv
}
{
   # Mac leak in CMOpenOrNewAccess in unit_tests PlatformCanvas_SkLayer_Test,
   # ToolbarControllerTest_FocusLocation_Test. See http://crbug.com/11333.
   bug_11333
   Memcheck:Leak
   fun:malloc
   fun:stdSmartNewPtr
   fun:stdSmartNewHandle
   fun:IOCreateAndOpen
   fun:ScratchInit
   fun:CMOpenOrNewAccess
}
{
   # Tiny one-time leak, widely seen by valgind users; everyone suppresses this.
   # See related discussion at http://gcc.gnu.org/bugzilla/show_bug.cgi?id=39366
   plugin_bundle_global_leak
   Memcheck:Leak
   fun:malloc
   fun:__cxa_get_globals
   fun:__cxa_allocate_exception
   fun:_ZN4dyld4loadEPKcRKNS_11LoadContextE
   fun:dlopen
   fun:dlopen
   fun:_CFBundleDlfcnCheckLoaded
}
{
   bug_18223
   Memcheck:Cond
   fun:_ZNK8Security12UnixPlusPlus17StaticForkMonitorclEv
   fun:_ZN12ocspdGlobals10serverPortEv
}

# 2. Intentional unit test errors, stuff that is somehow a false positive
# in our own code, or stuff that is so trivial it's not worth fixing.

# 3. Suppressions for real chromium bugs that are not yet fixed.
{
  bug_17297
  Memcheck:Leak
  fun:malloc
  ...
  fun:+[NSColor keyboardFocusIndicatorColor]
  fun:+[NSColor colorWithCatalogName:colorName:]
  fun:+[NSCatalogColor newWithCoder:zone:]
  fun:-[NSColor initWithCoder:]
}
{
   bug_21280
   Memcheck:Leak
   fun:malloc_zone_malloc
   ...
   fun:ATSFontLoadUnicodeCharacterSet
   ...
   fun:__NSFontInstanceInfoInitializeMetricsInfo
   ...
   fun:-[NSFont boundingRectForGlyph:]
}
{
   bug_21479
   Memcheck:Leak
   fun:malloc_zone_malloc
   fun:_CFRuntimeCreateInstance
   fun:CFPasteboardCreate
   fun:CFPasteboardCreateUnique
   fun:+[NSPasteboard _pasteboardWithName:]
   fun:+[NSPasteboard pasteboardWithUniqueName]
}
{
   bug_21479
   Memcheck:Leak
   fun:malloc_zone_malloc
   fun:_CFRuntimeCreateInstance
   fun:CFPasteboardCreate
   fun:+[NSPasteboard _pasteboardWithName:]
   fun:-[FindPasteboard findPboard]
}
{
   bug_22544
   Memcheck:Leak
   fun:malloc_zone_malloc
   fun:_CFRuntimeCreateInstance
   fun:__CFArrayInit
   fun:CFArrayCreateMutableCopy
   fun:_ZN3net22MacTrustedCertificates27CopyTrustedCertificateArrayEv
   fun:_ZNK3net15X509Certificate6VerifyERKSsiPNS_16CertVerifyResultE
}

