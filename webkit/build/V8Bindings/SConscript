# Copyright (c) 2006-2008 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

Import('env')

env = env.Clone()

if env['PLATFORM'] == 'win32':
    env.Prepend(
        CPPDEFINES = [
                'NOGDI',
                ],

        CCFLAGS = [
                '/TP',

                '/wd4291',
                '/wd4099',
                '/wd4996',
                '/wd4521',
                '/wd4244',
                '/wd4800',
                ],
        )
else:
  # We need to include the parts of icu and libxml that we want here:
  env.Append(
    CPPPATH = [
      '$ICU38_DIR/public/common',
      '$LIBXML_DIR/include',
      ])

inputs = [
    '$SHARED_DIR/PausedTimeouts.cpp',

    '$DERIVED_DIR/CSSGrammar.cpp',
    '$DERIVED_DIR/HTMLNames.cpp',
    '$DERIVED_DIR/SVGElementFactory.cpp',
    '$DERIVED_DIR/SVGNames.cpp',
    '$DERIVED_DIR/UserAgentStyleSheetsData.cpp',
    '$DERIVED_DIR/XLinkNames.cpp',
    '$DERIVED_DIR/XMLNames.cpp',
    '$DERIVED_DIR/XPathGrammar.cpp',

    # TODO(sgk):  derive this list (the generated V8*.cpp names
    # from the BindingsEmitter handling of the .idl names in
    # webkit\build\port\SConscript.
    '$DERIVED_DIR/V8Attr.cpp',
    '$DERIVED_DIR/V8BarInfo.cpp',
    '$DERIVED_DIR/V8CanvasGradient.cpp',
    '$DERIVED_DIR/V8CanvasPattern.cpp',
    '$DERIVED_DIR/V8CanvasPixelArray.cpp',
    '$DERIVED_DIR/V8CanvasRenderingContext2D.cpp',
    '$DERIVED_DIR/V8CDATASection.cpp',
    '$DERIVED_DIR/V8CharacterData.cpp',
    '$DERIVED_DIR/V8Clipboard.cpp',
    '$DERIVED_DIR/V8Comment.cpp',
    '$DERIVED_DIR/V8Console.cpp',
    '$DERIVED_DIR/V8Counter.cpp',
    '$DERIVED_DIR/V8CSSCharsetRule.cpp',
    '$DERIVED_DIR/V8CSSFontFaceRule.cpp',
    '$DERIVED_DIR/V8CSSImportRule.cpp',
    '$DERIVED_DIR/V8CSSMediaRule.cpp',
    '$DERIVED_DIR/V8CSSPageRule.cpp',
    '$DERIVED_DIR/V8CSSPrimitiveValue.cpp',
    '$DERIVED_DIR/V8CSSRule.cpp',
    '$DERIVED_DIR/V8CSSRuleList.cpp',
    '$DERIVED_DIR/V8CSSStyleDeclaration.cpp',
    '$DERIVED_DIR/V8CSSStyleRule.cpp',
    '$DERIVED_DIR/V8CSSStyleSheet.cpp',
    '$DERIVED_DIR/V8CSSValue.cpp',
    '$DERIVED_DIR/V8CSSValueList.cpp',
    '$DERIVED_DIR/V8CSSVariablesDeclaration.cpp',
    '$DERIVED_DIR/V8CSSVariablesRule.cpp',
    '$DERIVED_DIR/V8Document.cpp',
    '$DERIVED_DIR/V8DocumentFragment.cpp',
    '$DERIVED_DIR/V8DocumentType.cpp',
    '$DERIVED_DIR/V8DOMCoreException.cpp',
    '$DERIVED_DIR/V8DOMImplementation.cpp',
    '$DERIVED_DIR/V8DOMParser.cpp',
    '$DERIVED_DIR/V8DOMSelection.cpp',
    '$DERIVED_DIR/V8DOMWindow.cpp',
    '$DERIVED_DIR/V8Element.cpp',
    '$DERIVED_DIR/V8Entity.cpp',
    '$DERIVED_DIR/V8EntityReference.cpp',
    '$DERIVED_DIR/V8Event.cpp',
    '$DERIVED_DIR/V8EventException.cpp',
    '$DERIVED_DIR/V8EventTargetNode.cpp',
    '$DERIVED_DIR/V8File.cpp',
    '$DERIVED_DIR/V8FileList.cpp',
    '$DERIVED_DIR/V8History.cpp',
    '$DERIVED_DIR/V8HTMLAnchorElement.cpp',
    '$DERIVED_DIR/V8HTMLAppletElement.cpp',
    '$DERIVED_DIR/V8HTMLAreaElement.cpp',
    '$DERIVED_DIR/V8HTMLBaseElement.cpp',
    '$DERIVED_DIR/V8HTMLBaseFontElement.cpp',
    '$DERIVED_DIR/V8HTMLBlockquoteElement.cpp',
    '$DERIVED_DIR/V8HTMLBodyElement.cpp',
    '$DERIVED_DIR/V8HTMLBRElement.cpp',
    '$DERIVED_DIR/V8HTMLButtonElement.cpp',
    '$DERIVED_DIR/V8HTMLCanvasElement.cpp',
    '$DERIVED_DIR/V8HTMLCollection.cpp',
    '$DERIVED_DIR/V8HTMLDirectoryElement.cpp',
    '$DERIVED_DIR/V8HTMLDivElement.cpp',
    '$DERIVED_DIR/V8HTMLDListElement.cpp',
    '$DERIVED_DIR/V8HTMLDocument.cpp',
    '$DERIVED_DIR/V8HTMLElement.cpp',
    '$DERIVED_DIR/V8HTMLEmbedElement.cpp',
    '$DERIVED_DIR/V8HTMLFieldSetElement.cpp',
    '$DERIVED_DIR/V8HTMLFontElement.cpp',
    '$DERIVED_DIR/V8HTMLFormElement.cpp',
    '$DERIVED_DIR/V8HTMLFrameElement.cpp',
    '$DERIVED_DIR/V8HTMLFrameSetElement.cpp',
    '$DERIVED_DIR/V8HTMLHeadElement.cpp',
    '$DERIVED_DIR/V8HTMLHeadingElement.cpp',
    '$DERIVED_DIR/V8HTMLHRElement.cpp',
    '$DERIVED_DIR/V8HTMLHtmlElement.cpp',
    '$DERIVED_DIR/V8HTMLIFrameElement.cpp',
    '$DERIVED_DIR/V8HTMLImageElement.cpp',
    '$DERIVED_DIR/V8HTMLInputElement.cpp',
    '$DERIVED_DIR/V8HTMLIsIndexElement.cpp',
    '$DERIVED_DIR/V8HTMLLabelElement.cpp',
    '$DERIVED_DIR/V8HTMLLegendElement.cpp',
    '$DERIVED_DIR/V8HTMLLIElement.cpp',
    '$DERIVED_DIR/V8HTMLLinkElement.cpp',
    '$DERIVED_DIR/V8HTMLMapElement.cpp',
    '$DERIVED_DIR/V8HTMLMarqueeElement.cpp',
    '$DERIVED_DIR/V8HTMLMenuElement.cpp',
    '$DERIVED_DIR/V8HTMLMetaElement.cpp',
    '$DERIVED_DIR/V8HTMLModElement.cpp',
    '$DERIVED_DIR/V8HTMLObjectElement.cpp',
    '$DERIVED_DIR/V8HTMLOListElement.cpp',
    '$DERIVED_DIR/V8HTMLOptGroupElement.cpp',
    '$DERIVED_DIR/V8HTMLOptionElement.cpp',
    '$DERIVED_DIR/V8HTMLOptionsCollection.cpp',
    '$DERIVED_DIR/V8HTMLParagraphElement.cpp',
    '$DERIVED_DIR/V8HTMLParamElement.cpp',
    '$DERIVED_DIR/V8HTMLPreElement.cpp',
    '$DERIVED_DIR/V8HTMLQuoteElement.cpp',
    '$DERIVED_DIR/V8HTMLScriptElement.cpp',
    '$DERIVED_DIR/V8HTMLSelectElement.cpp',
    '$DERIVED_DIR/V8HTMLSelectionInputElement.cpp',
    '$DERIVED_DIR/V8HTMLStyleElement.cpp',
    '$DERIVED_DIR/V8HTMLTableCaptionElement.cpp',
    '$DERIVED_DIR/V8HTMLTableCellElement.cpp',
    '$DERIVED_DIR/V8HTMLTableColElement.cpp',
    '$DERIVED_DIR/V8HTMLTableElement.cpp',
    '$DERIVED_DIR/V8HTMLTableRowElement.cpp',
    '$DERIVED_DIR/V8HTMLTableSectionElement.cpp',
    '$DERIVED_DIR/V8HTMLTextAreaElement.cpp',
    '$DERIVED_DIR/V8HTMLTitleElement.cpp',
    '$DERIVED_DIR/V8HTMLUListElement.cpp',
    '$DERIVED_DIR/V8ImageData.cpp',
    '$DERIVED_DIR/V8InspectorController.cpp',
    '$DERIVED_DIR/V8KeyboardEvent.cpp',
    '$DERIVED_DIR/V8Location.cpp',
    '$DERIVED_DIR/V8MediaList.cpp',
    '$DERIVED_DIR/V8MessageEvent.cpp',
    '$DERIVED_DIR/V8MimeType.cpp',
    '$DERIVED_DIR/V8MimeTypeArray.cpp',
    '$DERIVED_DIR/V8MouseEvent.cpp',
    '$DERIVED_DIR/V8MutationEvent.cpp',
    '$DERIVED_DIR/V8NamedNodeMap.cpp',
    '$DERIVED_DIR/V8Navigator.cpp',
    '$DERIVED_DIR/V8Node.cpp',
    '$DERIVED_DIR/V8NodeFilter.cpp',
    '$DERIVED_DIR/V8NodeIterator.cpp',
    '$DERIVED_DIR/V8NodeList.cpp',
    '$DERIVED_DIR/V8Notation.cpp',
    '$DERIVED_DIR/V8NSResolver.cpp',
    '$DERIVED_DIR/V8OverflowEvent.cpp',
    '$DERIVED_DIR/V8Plugin.cpp',
    '$DERIVED_DIR/V8PluginArray.cpp',
    '$DERIVED_DIR/V8ProcessingInstruction.cpp',
    '$DERIVED_DIR/V8ProgressEvent.cpp',
    '$DERIVED_DIR/V8Range.cpp',
    '$DERIVED_DIR/V8RangeException.cpp',
    '$DERIVED_DIR/V8Rect.cpp',
    '$DERIVED_DIR/V8RGBColor.cpp',
    '$DERIVED_DIR/V8Screen.cpp',
    '$DERIVED_DIR/V8StyleSheet.cpp',
    '$DERIVED_DIR/V8StyleSheetList.cpp',
    '$DERIVED_DIR/V8SVGAElement.cpp',
    '$DERIVED_DIR/V8SVGAngle.cpp',
    '$DERIVED_DIR/V8SVGAnimateColorElement.cpp',
    '$DERIVED_DIR/V8SVGAnimatedAngle.cpp',
    '$DERIVED_DIR/V8SVGAnimatedBoolean.cpp',
    '$DERIVED_DIR/V8SVGAnimatedEnumeration.cpp',
    '$DERIVED_DIR/V8SVGAnimatedInteger.cpp',
    '$DERIVED_DIR/V8SVGAnimatedLength.cpp',
    '$DERIVED_DIR/V8SVGAnimatedLengthList.cpp',
    '$DERIVED_DIR/V8SVGAnimatedNumber.cpp',
    '$DERIVED_DIR/V8SVGAnimatedNumberList.cpp',
    '$DERIVED_DIR/V8SVGAnimatedPoints.cpp',
    '$DERIVED_DIR/V8SVGAnimatedPreserveAspectRatio.cpp',
    '$DERIVED_DIR/V8SVGAnimatedRect.cpp',
    '$DERIVED_DIR/V8SVGAnimatedString.cpp',
    '$DERIVED_DIR/V8SVGAnimatedTransformList.cpp',
    '$DERIVED_DIR/V8SVGAnimateElement.cpp',
    '$DERIVED_DIR/V8SVGAnimateTransformElement.cpp',
    '$DERIVED_DIR/V8SVGAnimationElement.cpp',
    '$DERIVED_DIR/V8SVGCircleElement.cpp',
    '$DERIVED_DIR/V8SVGClipPathElement.cpp',
    '$DERIVED_DIR/V8SVGColor.cpp',
    '$DERIVED_DIR/V8SVGCursorElement.cpp',
    '$DERIVED_DIR/V8SVGDefinitionSrcElement.cpp',
    '$DERIVED_DIR/V8SVGDefsElement.cpp',
    '$DERIVED_DIR/V8SVGDescElement.cpp',
    '$DERIVED_DIR/V8SVGDocument.cpp',
    '$DERIVED_DIR/V8SVGElement.cpp',
    '$DERIVED_DIR/V8SVGElementInstance.cpp',
    '$DERIVED_DIR/V8SVGElementInstanceList.cpp',
    '$DERIVED_DIR/V8SVGEllipseElement.cpp',
    '$DERIVED_DIR/V8SVGException.cpp',
    '$DERIVED_DIR/V8SVGFontFaceElement.cpp',
    '$DERIVED_DIR/V8SVGFontFaceFormatElement.cpp',
    '$DERIVED_DIR/V8SVGFontFaceNameElement.cpp',
    '$DERIVED_DIR/V8SVGFontFaceSrcElement.cpp',
    '$DERIVED_DIR/V8SVGFontFaceUriElement.cpp',
    '$DERIVED_DIR/V8SVGForeignObjectElement.cpp',
    '$DERIVED_DIR/V8SVGGElement.cpp',
    '$DERIVED_DIR/V8SVGGradientElement.cpp',
    '$DERIVED_DIR/V8SVGImageElement.cpp',
    '$DERIVED_DIR/V8SVGLength.cpp',
    '$DERIVED_DIR/V8SVGLengthList.cpp',
    '$DERIVED_DIR/V8SVGLinearGradientElement.cpp',
    '$DERIVED_DIR/V8SVGLineElement.cpp',
    '$DERIVED_DIR/V8SVGMarkerElement.cpp',
    '$DERIVED_DIR/V8SVGMaskElement.cpp',
    '$DERIVED_DIR/V8SVGMatrix.cpp',
    '$DERIVED_DIR/V8SVGMetadataElement.cpp',
    '$DERIVED_DIR/V8SVGNumber.cpp',
    '$DERIVED_DIR/V8SVGNumberList.cpp',
    '$DERIVED_DIR/V8SVGPaint.cpp',
    '$DERIVED_DIR/V8SVGPathElement.cpp',
    '$DERIVED_DIR/V8SVGPathSeg.cpp',
    '$DERIVED_DIR/V8SVGPathSegArcAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegArcRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegClosePath.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoCubicAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoCubicRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoCubicSmoothAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoCubicSmoothRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoQuadraticAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoQuadraticRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoQuadraticSmoothAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegCurvetoQuadraticSmoothRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegLinetoAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegLinetoHorizontalAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegLinetoHorizontalRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegLinetoRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegLinetoVerticalAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegLinetoVerticalRel.cpp',
    '$DERIVED_DIR/V8SVGPathSegList.cpp',
    '$DERIVED_DIR/V8SVGPathSegMovetoAbs.cpp',
    '$DERIVED_DIR/V8SVGPathSegMovetoRel.cpp',
    '$DERIVED_DIR/V8SVGPatternElement.cpp',
    '$DERIVED_DIR/V8SVGPoint.cpp',
    '$DERIVED_DIR/V8SVGPointList.cpp',
    '$DERIVED_DIR/V8SVGPolygonElement.cpp',
    '$DERIVED_DIR/V8SVGPolylineElement.cpp',
    '$DERIVED_DIR/V8SVGPreserveAspectRatio.cpp',
    '$DERIVED_DIR/V8SVGRadialGradientElement.cpp',
    '$DERIVED_DIR/V8SVGRect.cpp',
    '$DERIVED_DIR/V8SVGRectElement.cpp',
    '$DERIVED_DIR/V8SVGRenderingIntent.cpp',
    '$DERIVED_DIR/V8SVGScriptElement.cpp',
    '$DERIVED_DIR/V8SVGSetElement.cpp',
    '$DERIVED_DIR/V8SVGStopElement.cpp',
    '$DERIVED_DIR/V8SVGStringList.cpp',
    '$DERIVED_DIR/V8SVGStyleElement.cpp',
    '$DERIVED_DIR/V8SVGSVGElement.cpp',
    '$DERIVED_DIR/V8SVGSwitchElement.cpp',
    '$DERIVED_DIR/V8SVGSymbolElement.cpp',
    '$DERIVED_DIR/V8SVGTextContentElement.cpp',
    '$DERIVED_DIR/V8SVGTextElement.cpp',
    '$DERIVED_DIR/V8SVGTextPathElement.cpp',
    '$DERIVED_DIR/V8SVGTextPositioningElement.cpp',
    '$DERIVED_DIR/V8SVGTitleElement.cpp',
    '$DERIVED_DIR/V8SVGTransform.cpp',
    '$DERIVED_DIR/V8SVGTransformList.cpp',
    '$DERIVED_DIR/V8SVGTRefElement.cpp',
    '$DERIVED_DIR/V8SVGTSpanElement.cpp',
    '$DERIVED_DIR/V8SVGUnitTypes.cpp',
    '$DERIVED_DIR/V8SVGURIReference.cpp',
    '$DERIVED_DIR/V8SVGUseElement.cpp',
    '$DERIVED_DIR/V8SVGViewElement.cpp',
    '$DERIVED_DIR/V8SVGZoomEvent.cpp',
    '$DERIVED_DIR/V8Text.cpp',
    '$DERIVED_DIR/V8TextEvent.cpp',
    '$DERIVED_DIR/V8TextMetrics.cpp',
    '$DERIVED_DIR/V8TreeWalker.cpp',
    '$DERIVED_DIR/V8UIEvent.cpp',
    '$DERIVED_DIR/V8UndetectableHTMLCollection.cpp',
    '$DERIVED_DIR/V8WebkitCSSKeyframeRule.cpp',
    '$DERIVED_DIR/V8WebkitCSSKeyframesRule.cpp',
    '$DERIVED_DIR/V8WheelEvent.cpp',
    '$DERIVED_DIR/V8XMLHttpRequest.cpp',
    '$DERIVED_DIR/V8XMLHttpRequestException.cpp',
    '$DERIVED_DIR/V8XMLHttpRequestUpload.cpp',
    '$DERIVED_DIR/V8XMLSerializer.cpp',
    '$DERIVED_DIR/V8XPathEvaluator.cpp',
    '$DERIVED_DIR/V8XPathException.cpp',
    '$DERIVED_DIR/V8XPathExpression.cpp',
    '$DERIVED_DIR/V8XPathNSResolver.cpp',
    '$DERIVED_DIR/V8XPathResult.cpp',
    '$DERIVED_DIR/V8XSLTProcessor.cpp',

    '$PORT_DIR/bindings/v8/JSNSResolver.cpp',
    '$PORT_DIR/bindings/v8/JSXPathNSResolver.cpp',
    '$PORT_DIR/bindings/v8/np_v8object.cpp',
    '$PORT_DIR/bindings/v8/npruntime.cpp',
    '$PORT_DIR/bindings/v8/v8_custom.cpp',
    '$PORT_DIR/bindings/v8/v8_events.cpp',
    '$PORT_DIR/bindings/v8/v8_helpers.cpp',
    '$PORT_DIR/bindings/v8/v8_index.cpp',
    '$PORT_DIR/bindings/v8/v8_nodefilter.cpp',
    '$PORT_DIR/bindings/v8/v8_np_utils.cpp',
    '$PORT_DIR/bindings/v8/v8_npobject.cpp',
    '$PORT_DIR/bindings/v8/v8_proxy.cpp',
    '$PORT_DIR/bindings/v8/v8_vectornodelist.cpp',
    '$PORT_DIR/bindings/v8/V8XMLHttpRequestCustom.cpp',
    '$PORT_DIR/page/inspector/InspectorController.cpp',
]

if env['PLATFORM'] == 'win32':
  inputs.append('precompiled_v8bindings.cpp')


# TODO(erg): These are temporarily disabled during the merge of code back to
# WebKit. As soon as we're back on TOT, these go back into the working files
# section.
if env['PLATFORM'] in ('darwin', 'posix'):
  remove_files = [
    '$DERIVED_DIR/SVGElementFactory.cpp',
    '$DERIVED_DIR/V8SVGCursorElement.cpp',
    '$DERIVED_DIR/V8SVGMaskElement.cpp',
    '$DERIVED_DIR/V8WebkitCSSKeyframeRule.cpp',
    '$DERIVED_DIR/V8WebkitCSSKeyframesRule.cpp',
  ]
  for remove in remove_files:
    inputs.remove(remove)

# TODO(erg): Get Frame.h ported and half of this should compile. Get whatever
#            String.h is referenced below and the other half should compile
if env['PLATFORM'] in ('darwin', 'posix'):
  remove_files = [
    '$DERIVED_DIR/V8Clipboard.cpp',
    '$DERIVED_DIR/V8DOMWindow.cpp',
    '$DERIVED_DIR/V8HTMLInputElement.cpp',
    '$DERIVED_DIR/V8HTMLIsIndexElement.cpp',
    '$DERIVED_DIR/V8HTMLSelectionInputElement.cpp',
    '$DERIVED_DIR/V8InspectorController.cpp',
    '$DERIVED_DIR/V8Location.cpp',
    '$DERIVED_DIR/V8MimeType.cpp',
    '$DERIVED_DIR/V8MimeTypeArray.cpp',
    '$DERIVED_DIR/V8MouseEvent.cpp',
    '$DERIVED_DIR/V8Navigator.cpp',
    '$DERIVED_DIR/V8Plugin.cpp',
    '$DERIVED_DIR/V8PluginArray.cpp',
  ]
  for remove in remove_files:
    inputs.remove(remove)

env.ChromeStaticLibrary('V8Bindings', inputs)
