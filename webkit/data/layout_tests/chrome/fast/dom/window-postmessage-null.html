<html>

<script>
if (window.layoutTestController) {
  layoutTestController.dumpAsText();
  layoutTestController.waitUntilDone();
}

function onmessage(evt) {
  alert(evt.data);

  if (evt.data == 'done' && window.layoutTestController)
    layoutTestController.notifyDone();
}

function run_test() {
  window.addEventListener('message', onmessage);
  try {
    window.postMessage('1', 1, '*')
    window.postMessage('2', "", '*')
    window.postMessage('3', window, '*')
    window.postMessage('4', { x: 1 }, '*')
    window.postMessage('5', null, '*')
    window.postMessage('6', void 0, '*')
    window.postMessage('done', '*')
  } catch(e) {
    alert(e);
    if (window.layoutTestController)
      layoutTestController.notifyDone();
  }
}

</script>
<body onload='run_test()'>
</body>
</html>
